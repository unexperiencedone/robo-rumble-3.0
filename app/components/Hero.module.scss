@use "sass:math";

.heroContainer {
  position: relative;
  text-align: center;
  z-index: 10;
}

.glitchText {
  font-family: 'Courier New', Courier, monospace; // Or a more "cyber" font if available
  font-size: 4rem;
  font-weight: bold;
  color: #fff;
  position: relative;
  text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
    0.025em 0.04em 0 #fffc00;
  animation: glitch 725ms infinite;

  @media (min-width: 768px) {
    font-size: 6rem;
  }

  &::before,
  &::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  &::before {
    left: 2px;
    text-shadow: -1px 0 #ff00c1;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim-1 5s infinite linear alternate-reverse;
  }

  &::after {
    left: -2px;
    text-shadow: -1px 0 #00fff9;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim-2 5s infinite linear alternate-reverse;
  }

  // The "violent" state - triggers faster, more intense animations
  &.violent {
    animation: glitch 200ms infinite; // Very fast jitter
    
    &::before {
      animation: glitch-anim-1 0.5s infinite linear alternate-reverse;
      left: 5px;
      text-shadow: -3px 0 #ff00c1;
    }
    
    &::after {
      animation: glitch-anim-2 0.5s infinite linear alternate-reverse;
      left: -5px;
      text-shadow: 3px 0 #00fff9;
    }
  }
}

.subtitle {
  position: relative;
  display: inline-block;
  color: #ff0000; // RED ALERT
  text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000;
  background: rgba(255, 0, 0, 0.1);
  padding: 0.2em 0.5em;
  border: 1px solid rgba(255, 0, 0, 0.3);
  box-shadow: 0 0 15px rgba(255, 0, 0, 0.1);
  overflow: hidden;

  // Scanline effect
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 0, 0, 0.4), transparent);
    animation: scan-pass 3s linear infinite;
  }

  // Blinking cursor underscore interaction (simulated)
  animation: fadeFlicker 4s infinite;
}

@keyframes scan-pass {
  0% { left: -100%; }
  20% { left: 100%; }
  100% { left: 100%; }
}

@keyframes fadeFlicker {
  0%, 100% { opacity: 0.8; }
  5% { opacity: 0.1; }
  10% { opacity: 0.8; }
  15% { opacity: 0.3; }
  20% { opacity: 0.8; }
}

@keyframes glitch {
  0% {
    text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
      0.025em 0.04em 0 #fffc00;
  }
  15% {
    text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
      0.025em 0.04em 0 #fffc00;
  }
  16% {
    text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff,
      -0.05em -0.05em 0 #fffc00;
  }
  49% {
    text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff,
      -0.05em -0.05em 0 #fffc00;
  }
  50% {
    text-shadow: 0.05em 0.035em 0 #00fffc, 0.03em 0 0 #fc00ff,
      0 -0.04em 0 #fffc00;
  }
  99% {
    text-shadow: 0.05em 0.035em 0 #00fffc, 0.03em 0 0 #fc00ff,
      0 -0.04em 0 #fffc00;
  }
  100% {
    text-shadow: -0.05em 0 0 #00fffc, -0.025em -0.04em 0 #fc00ff,
      -0.04em -0.025em 0 #fffc00;
  }
}

@keyframes glitch-anim-1 {
  @for $i from 0 through 20 {
    #{percentage($i * 0.05)} {
      clip: rect(random(100) + px, 9999px, random(100) + px, 0);
      transform: skew(random(4) - 2 + deg); // skew() is valid standard CSS
    }
  }
}

@keyframes glitch-anim-2 {
  @for $i from 0 through 20 {
    #{percentage($i * 0.05)} {
      clip: rect(random(100) + px, 9999px, random(100) + px, 0);
      transform: skew(random(4) - 2 + deg);
    }
  }
}

// Explosive Entrance Animation
.heroContainer h1 {
    display: flex;       // Keep letters inline
    justify-content: center;
    flex-wrap: wrap;     // Allow wrapping on small screens if needed
}

.letter {
    display: inline-block;
    opacity: 0;
    white-space: pre; // Handle spaces correctly
    animation: explosiveEnter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    
    // We can also add a persistent subtle glitch to each letter if desired
    // but the main chaotic glitch is on the parent.
    
    // Ensure letters honor the parent's violent glitch effect if needed
    // or just let the parent transform affect them.
}

@keyframes explosiveEnter {
    0% {
        opacity: 0;
        transform: scale(3) rotate(15deg) skew(30deg);
        filter: blur(10px);
        text-shadow: 10px 0 20px red, -10px 0 20px blue;
    }
    40% {
        opacity: 1;
        transform: scale(1.1) rotate(-5deg) skew(-10deg);
        filter: blur(2px);
        text-shadow: 2px 0 5px red, -2px 0 5px blue;
    }
    70% {
        transform: scale(0.95) rotate(2deg) skew(5deg);
    }
    100% {
        opacity: 1;
        transform: scale(1) rotate(0) skew(0);
        filter: blur(0);
        // After entrance, settle into "broken" look
        // After entrance, settle into "broken" 3D look
        text-shadow: 
            1px 1px 0px #000, 
            2px 2px 0px #222, 
            3px 3px 0px #00F0FF, 
            4px 4px 0px #00F0FF,
            6px 6px 5px rgba(0,0,0,0.5); 
    }
}

// Broken Typography / flickering atoms
.letter {
    // Variations for a "broken" feel
    &:nth-child(odd) {
         animation: explosiveEnter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards, broken-flicker 4s infinite 1s;
    }
    &:nth-child(even) {
         animation: explosiveEnter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards, broken-flicker 5s infinite 0.5s;
    }

    // Specific "dead" or "glitched" letters to break uniformity
    &:nth-child(3) { // 'B'
        color: #b0b0b0; // Dim
    }
    


    &:nth-child(6) { // 'R'
        animation: explosiveEnter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards, broken-flicker 3.5s infinite 0.2s;
        color: #39ff14; // Lime Green
        text-shadow: 2px 2px 0 #005500;
    }
    
    &:nth-child(7) { // 'M'
        color: #00fffc; // Neon Cyan stuck
        text-shadow: 0 0 10px #00fffc;
    }

    &:nth-child(9) { // 'L'
        color: #ff5e00; // Bright Orange
        text-shadow: -2px 0px 5px #ff5e00;
        animation: explosiveEnter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards, broken-flash 4s infinite 2s;
    }
    
    &:nth-child(10) { // 'E'
        animation: explosiveEnter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards, broken-flash 0.2s infinite;
    }
    
    &:nth-child(12) { // '3'
         color: #ff00c1; // Hot pink
         text-shadow: 0 0 8px #ff00c1;
    }

    &:nth-child(14) { // '0'
        color: #8d00ff; // Electric Purple
        text-shadow: 2px -2px 0 #00ff00; // Mismatched shadow
    }
}

@keyframes broken-flicker {
    0%, 90% { 
        color: #fff; 
        opacity: 1; 
        text-shadow: 1px 1px 0 #000, 2px 2px 0 #222, 3px 3px 0 #00F0FF, 4px 4px 0 #00F0FF;
    }
    91% { 
        color: #333; 
        opacity: 0.5; 
        text-shadow: none; // Flatten on glitch
    }
    92% { 
        color: #39ff14; 
        opacity: 1; 
        text-shadow: 2px 2px 0 #ff00c1, -2px -2px 0 #39ff14; // Glitch shadow
    }
    93% { 
        color: #fff; 
        opacity: 1; 
        text-shadow: 1px 1px 0 #000, 2px 2px 0 #222, 3px 3px 0 #00F0FF, 4px 4px 0 #00F0FF;
    }
    95% { 
        color: #ff5e00; 
        opacity: 0.9; 
        text-shadow: -2px 0 5px cyan; 
    }
    97% { 
        color: #8d00ff; 
        opacity: 1; 
        text-shadow: 0 0 10px white, 4px 4px 0 #000;
    }
    100% { 
        color: #fff; 
        opacity: 1; 
        text-shadow: 1px 1px 0 #000, 2px 2px 0 #222, 3px 3px 0 #00F0FF, 4px 4px 0 #00F0FF;
    }
}

@keyframes broken-flash {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
}
